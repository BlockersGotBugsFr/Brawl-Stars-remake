<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Studio Intro</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: white;
    }

    section {
      height: 100vh;
      width: 100vw;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    /* Intro video */
    #intro {
      background: black;
      z-index: 2;
    }

    #intro video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Loading screen */
   #loading {
    background-image: url('brawl star bg.jpeg');
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center; /* This helps center the image within the container */
  display: none;
  z-index: 3;
  position: relative;

    /* Make it a full-page overlay that doesn't scroll with the page */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    /* A high z-index ensures it is on top of everything else */
    z-index: 9999;
    
    /* Center a spinner or other loading animation */
    display: flex;
    justify-content: center;
    align-items: center;

    /* Initially visible; JS will hide it */
    opacity: 1;
    transition: opacity 0.5s ease;
}

/* Optional: Add a spinner animation */
.spinner {
    border: 8px solid rgba(255, 255, 255, 0.3);
    border-top: 8px solid #ffffff;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Add a class to fade out the loader */
.fade-out {
    opacity: 0;
    pointer-events: none; /* Prevents clicks on the now-invisible div */
}


    .bar-container {
      width: 80%;
      height: 20px;
      background: black;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      position: absolute; /* Position the bar independent of the normal flow */
      left: 50%; /* Center the bar horizontally */
      transform: translateX(-50%); /* Adjust for horizontal centering */
      bottom: 80px; /* Adjust this value to move the bar up or down from the bottom */
    }

    .progress {
      height: 100%;
      width: 0%;
      background: #00BFFF; /* slightly lighter for visibility */
      transition: width 0.3s;
    }
  </style>
</head>
<body>
  <!-- Intro video -->
  <section id="intro">
    <video id="introVideo" autoplay muted playsinline>
      <source src="lv_0_20250831190250.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </section>

  <!-- Loading screen -->
  <section id="loading">
    <div class="bar-container">
      <div class="progress" id="progress"></div>
    </div>
  </section>

  <script>
    const intro = document.getElementById("intro");
    const video = document.getElementById("introVideo");
    const loading = document.getElementById("loading");
    const progress = document.getElementById("progress");

    // Video events
    video.addEventListener("canplaythrough", () => {
      video.play().catch(() => showLoading());
    });

    video.onended = showLoading;

    // Show loading screen
    function showLoading() {
      intro.style.display = "none";
      loading.style.display = "flex";

      let width = 0;
      const interval = setInterval(() => {
        if (width >= 100) {
          clearInterval(interval);
          goToLobby();
        } else {
          width += 2; // adjust speed if needed
          progress.style.width = width + "%";
        }
      }, 100);
    }

    function goToLobby() {
      window.location.href = "lobby.html"; // make sure this file exists
    }
  </script>
</body>
</html>
