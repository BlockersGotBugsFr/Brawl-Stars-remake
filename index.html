<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Studio Intro</title>
  <style>
    body {
      margin: 0;
      background: black;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
    }

    section {
      height: 100vh;
      width: 100vw;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    /* Intro video */
    #intro {
      background: black;
      z-index: 2;
    }

    #intro video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Loading screen */
    #loading {
      background: black;
      color: white;
      display: none;
      z-index: 3;
      flex-direction: column;
    }

    .bar {
      width: 80%;
      height: 25px;
      background: #333;
      border-radius: 12px;
      overflow: hidden;
      margin-top: 20px;
      display: flex;
    }

    .progress-block {
      flex: 1;
      background: #555;
      margin: 1px;
      transition: background 0.3s;
    }
  </style>
</head>
<body>
  <!-- Intro video -->
  <section id="intro">
    <video id="introVideo" autoplay muted playsinline>
      <source src="lv_0_20250831190250.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </section>

  <!-- Loading bar -->
  <section id="loading">
    <h2>Loading...</h2>
    <div class="bar" id="bar"></div>
  </section>

  <script>
    const intro = document.getElementById("intro");
    const video = document.getElementById("introVideo");
    const loading = document.getElementById("loading");
    const bar = document.getElementById("bar");

    // Create 10 solid blocks for the progress bar
    const totalBlocks = 10;
    const blocks = [];
    for (let i = 0; i < totalBlocks; i++) {
      const block = document.createElement("div");
      block.classList.add("progress-block");
      bar.appendChild(block);
      blocks.push(block);
    }

    // Function to show loading bar
    function showLoading() {
      intro.style.display = "none";
      loading.style.display = "flex";

      let current = 0;
      const colors = ["red", "yellow", "blue", "green"];

      const interval = setInterval(() => {
        if (current >= totalBlocks) {
          clearInterval(interval);
          goToLobby();
          return;
        }

        // Color each block in sequence
        blocks[current].style.background = colors[current % colors.length];
        current++;
      }, 400); // Each block fills every 400ms
    }

    function goToLobby() {
      // Replace with your lobby URL or section logic
      // For example, redirect to "lobby.html"
      window.location.href = "lobby.html";
    }

    // Video events
    video.addEventListener("canplaythrough", () => {
      video.play().catch(() => {
        showLoading();
      });
    });

    video.onended = showLoading;
  </script>
</body>
</html>
